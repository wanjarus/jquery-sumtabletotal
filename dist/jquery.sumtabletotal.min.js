/*
 *  jQuery sumtabletotal - v0.0.1
 *  jQuery plugin to sum total and append total row for an HTML table
 *  https://github.com/zealzhangz/jquery-sumtabletotal
 *
 *  Made by zealzhangz
 *  Under MIT License
 */
if("undefined"==typeof jQuery)throw new Error("jquery-confirm requires jQuery");!function(a){function b(b,c){this.element=b,this.settings=a.extend({},d,c),this.total=[],this.calcTotal()}var c="sumtabletotal",d={colspan:1,totalText:"Total",color:"#000000",placeholder:"-",significant:2};b.prototype={calcTotal:function(){var b=this,c=a(b.element),d=c.find("tr:last td").length;if(b.total=new Array(d),b.settings.totalIndexArry){for(var e=0;e<b.settings.totalIndexArry.length;e++)b.total[b.settings.totalIndexArry[e]]=0;c.find("tr:not(:first)").each(function(c,d){for(var e=a(d).find("td"),f=0;f<b.settings.totalIndexArry.length;f++)b.total[b.settings.totalIndexArry[f]]+=isNaN(parseFloat(a(e[b.settings.totalIndexArry[f]]).text()))?0:parseFloat(a(e[b.settings.totalIndexArry[f]]).text())})}if(b.settings.rateObjectArry){for(var f in b.settings.rateObjectArry)isNaN(b.settings.rateObjectArry[f].index)?console.error("Rate Object error!"):b.total[b.settings.rateObjectArry[f].index]=0;for(var g in b.settings.rateObjectArry)isNaN(b.total[b.settings.rateObjectArry[g].denominator])||isNaN(b.total[b.settings.rateObjectArry[g].numerator])||0===b.total[b.settings.rateObjectArry[g].denominator]?b.total[b.settings.rateObjectArry[g].index]=0:b.total[b.settings.rateObjectArry[g].index]=b.total[b.settings.rateObjectArry[g].numerator]/b.total[b.settings.rateObjectArry[g].denominator]}b.appendTotalRow()},appendTotalRow:function(){var b=this,c=a(b.element);void 0===b.settings.colspan&&(b.settings.colspan=1),void 0===b.settings.significant&&(b.settings.significant=2);for(var d="<tr style='color: "+b.settings.color+";'><th class='row' colspan='"+b.settings.colspan+"'>"+b.settings.totalText+"</th>",e=1;e<b.total.length;e++)if(isNaN(b.total[e])){if(e<b.settings.colspan)continue;d+="<td>"+b.settings.placeholder+"</td>"}else{var f=!1;for(var g in b.settings.rateObjectArry)e===b.settings.rateObjectArry[g].index&&(d+="<td>"+parseFloat(1e3*b.total[e]/10).toFixed(b.settings.significant)+"%</td>",f=!0);f||(d+="<td>"+parseFloat(b.total[e]).toFixed(b.settings.significant)+"</td>")}d+="</tr>",c.find("tr:last").after(d)}},a.fn[c]=function(d){var e=this;return e.each(function(){a.data(e,"plugin_"+c)||a.data(e,"plugin_"+c,new b(this,d))}),e}}(jQuery);